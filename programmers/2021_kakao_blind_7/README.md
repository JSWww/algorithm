# [프로그래머스] 매출 하락 최소화

[문제 링크](https://programmers.co.kr/learn/courses/30/lessons/72416)

[코드](https://github.com/JSWww/algorithm/blob/main/programmers/2021_kakao_blind_7/2021_kakao_blind_7.cpp)

## 풀이

트리 dp 문제

직원들이 워크숍에 참여할 경우와 불참할 경우로 나눠서 매출액의 합이 최소인 경우를 찾아야 한다.

dp 배열을 다음과 같이 정의하자  

```cpp
dp[i][0] = i번 노드가 루트인 서브트리에서 i번 노드가 워크숍에 불참하는 경우  
dp[i][1] = i번 노드가 루트인 서브트리에서 i번 노드가 워크숍에 참여하는 경우
```

루트 노드인 1번이 참여할 경우, 불참할 경우에 대한 값을 구하려면 자식들을 루트로 하는 서브트리에 대한 최소값이 구해져 있어야 한다. 1번 노드에서 dfs로 트리를 탐색하게 되면 리프 노드에서 처음으로 dp배열에 값이 정해지고 마지막으로 1번 노드에 대한 값을 구할 수 있게 된다. 최종적으로 구하고자 하는 값은 min(dp[1][0], dp[1][1])이 된다.

배열 dp를 구하는 방법은 다음과 같다. (직원 i의 자식노드 = c0, c1, c2 라고 가정)

### dp[i][1] 일 경우

직원 i가 워크숍에 참여했으므로 자식들이 워크숍에 참여하든 불참하든 상관없게 된다.  

```cpp
dp[i][1] = sales[i] + min(dp[c0][0], dp[c0][1]) + min(dp[c1][0], dp[c1][1]) + min(dp[c2][0], dp[c2][1]);
```

### dp[i][0] 일 경우  

이 경우는 두 가지로 나눠 생각해야 한다.

i의 모든 자식 노드 ci에 대해

#### dp[ci][1] < dp[ci][0] 인 ci 노드가 하나라도 있는 경우

이 경우는 자식 노드 중 하나가 이미 워크숍에 참여했다는 뜻이므로

`dp[i][0] = dp[i][1] - sales[i];`

#### dp[ci][1] < dp[ci][0] 인 ci 노드가 한 개도 없는 경우

이 경우는 자식 노드들이 아무도 회의에 참석하지 않았다는 뜻이다. 그래서 자식들 중 하나를 강제로 워크숍에 참여시켜야 한다. 자식들이 참여했을 때와 불참할 때의 차이가 가장 작은 자식을 골라 회의에 참석시킨다.

`dp[i][0] = dp[i][1] - sales[i] + min(dp[c0][1] - dp[c0][0], dp[c1][1] - dp[c1][0], dp[c2][1] - dp[c2][0]);`

## 여담

없음
